{% extends 'base.html.twig' %}

{% block body %}

    <div class="content">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-8 col-md-7 col-lg-offset-2">
                    <div class="card">
                        <div class="header">
                            <h4 class="title text-center">Crear Pago</h4>
                        </div>
                        <div class="content">
                            <div class="row">

                            </div>
                            {{ form_start(form) }}
                            <div class="row">
                                <div class="col-md-6">
                                    <label for="">Clientes</label>
                                    <select onchange="SelectCliente()"  class="form-control border-input" name="" id="cliente">
                                        <option></option>
                                        {% for cliente in clientes %}
                                            <option value="{{ cliente.id }}">{{ cliente.nombre }}</option>
                                        {% endfor %}
                                    </select>
                                </div>

                                <div class="col-md-6" >
                                    <div class="form-group">
                                        <label class="text-center">Proyectos</label>
                                        {{ form_widget(form.proyecto, { 'attr': {'class':'form-control border-input'}})}}
                                    </div>
                                </div>

                            </div>
                            <div class="row">
                                <div class="col-md-6" >
                                    <div class="form-group" >
                                        <label class="text-center">Monto</label>
                                        {{ form_widget(form.monto, { 'attr': {'class':'form-control border-input'}})}}
                                    </div>
                                </div>
                                <div class="col-md-3  ">
                                    <div class="form-group">
                                        <label class="text-center">fecha</label>
                                        {{ form_widget( form.fecha , { 'attr': {'class':'form-control border-input'}})}}
                                    </div>
                                </div>
                            </div>
                            <div class="text-center">
                                <a  class="btn btn-info btn-fill btn-wd"  href="{{ path('admin_pago_index') }}">Volver a la lista</a>

                                <input class="btn btn-success btn-fill btn-wd" type="submit" value="Crear" />
                            </div>
                            <div class="clearfix"></div>
                            {{ form_end(form) }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>




{% endblock %}
{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript">
        $(document).ready(function() { $("#idCliente").select2(); });
        $("#appbundle_pago_proyecto").empty();

    </script>
    <script>
        function  SelectCliente(){
            console.log($("#cliente").val());
            $(document).ready(function () {
                $.ajax({
                    type: "POST",
                    url: "{{ path ("admin_proyectoCliente") }}",
                    data: {id:$("#cliente").val()}
                }).done(function (data) {
                    console.log(data);
                    $("#appbundle_pago_proyecto").empty();
                    $.each(data,function(key, value)
                    {
                        $("#appbundle_pago_proyecto").append('<option value=' + value.id + '>' + value.titulo + '</option>');
                    });
                });

            })
        }

    </script>

{% endblock %}
